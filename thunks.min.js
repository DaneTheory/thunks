!function(n,r){"use strict";"object"==typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define([],r):n.thunks=r()}("object"==typeof window?window:this,function(){"use strict";function n(n){return"function"==typeof n}function r(r){return n(r)&&r._isThunk===p}function t(n,r){if(r=r||0,r>=n.length)return[];for(var t=n.length,u=Array(t-r);t-->r;)u[t-r]=n[t];return u}function u(n,r,t){if(t)for(var u=0,e=n.length;e>u;u++)r(n[u],u,n);else for(var l in n)n.hasOwnProperty(l)&&r(n[l],l,n)}function e(n,r,t){var u=[null,null];try{u[1]=r.apply(n,t)}catch(e){u[0]=e}return u}function l(r){return r?(n(r)?r=o(r):n(r.toThunk)?r=o(r.toThunk()):n(r.then)&&(r=o(c(r))),r):r}function o(n){return n._isThunk=p,n}function i(n){return function(o){var i,c=1,f=!1,a=v(n);if(a?i=Array(n.length):n&&"object"==typeof n&&(i={}),!i)return o(new Error("Not array or object"));var s=e(null,function(n,r){return u(n,r,a),--c||f?void 0:o(null,i)},[n,function(n,u){return f?void 0:(c++,n=l(n),r(n)?(n(function(n,r){return f?void 0:null!=n?(f=!0,o(n)):(i[u]=arguments.length>2?t(arguments,1):r,--c||o(null,i))}),void 0):(i[u]=n,--c||o(null,i)))}])[0];s&&(f=!0,o(s))}}function c(n){return function(r){return n.then(function(n){r(null,n)},r)}}function f(n){function u(r){var u=t(arguments);if(c.debug&&c.debug.apply(null,u),null!=r){if(u=[r],c.onerror){if(c.onerror(r)!==!0)return;u=[null]}}else u[0]=null;var l=e(n.ctx,n.callback,u);if(null!=l[0]&&c.onerror){if(c.onerror(l[0])!==!0)return;l=[null]}i.result=l,i.callback&&f(i)}var o,i=n.next,c=n.scope,a=n.result;if(a!==!1){if(n.result=!1,a[0])return u(a[0]);if(o=l(a[1]),!r(o))return null==o?u(null):u(null,o);var s=e(n.ctx,o,[u])[0];return s?u(s):null}}function a(n){return n.next={ctx:n.ctx,scope:n.scope,next:null,callback:null,result:null},o(function(r){return s(n,r)})}function s(n,r){return n.callback=r,n.result&&f(n),a(n.next)}function h(r){function u(n){var r={ctx:this===u?null:this,scope:e,next:null,callback:null,result:[null,n]};return a(r)}var e={onerror:null,debug:null};return n(r)?e.onerror=r:r&&(n(r.debug)&&(e.debug=r.debug),n(r.onerror)&&(e.onerror=r.onerror)),u.all=function(n){return u.call(this,i(n))},u.digest=function(){var n=arguments;return u.call(this,function(r){r.apply(null,n)})},u.thunkify=function(n){var r=this===u?null:this;return function(){var e=t(arguments);return u.call(r||this,function(r){e.push(r),n.apply(this,e)})}},u.delay=function(n){return u.call(this,function(r){setTimeout(r,n)})},u}var p={},d=Object.prototype.toString,v=Array.isArray||function(n){return"[object Array]"===d.call(n)};return h.NAME="thunks",h.VERSION="v1.4.0",h});