!function(n,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):n.thunks=t()}("object"==typeof window?window:this,function(){"use strict";function n(n){return"function"==typeof n}function t(t){return n(t)&&t._isThunk===h}function u(n,t){var u=n.length,r=Array(u);for(t=t||0;u-->t;)r[u-t]=n[u];return r}function r(n,t,u){if(u)for(var r=0,l=n.length;l>r;r++)t(n[r],r,n);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e,n)}function l(n,t,u){switch(u.length){case 1:return t.call(n,u[0])||null;case 2:return t.call(n,u[0],u[1])||null;case 3:return t.call(n,u[0],u[1],u[2])||null;default:return t.apply(n,u)||null}}function e(n,t,u,r){try{return l(n,u,r)}catch(e){t(e)}}function o(t){return t?(n(t)?t=c(t):n(t.toThunk)?t=c(t.toThunk()):n(t.then)&&(t=c(a(t))),t):t}function c(n){return n._isThunk=h,n}function i(n){return function(l){var c,i=1,a=!1,f=y(n);return f?c=Array(n.length):n&&"object"==typeof n&&(c={}),c?void e(null,function(n){a=!0,l(n)},function(n,t){r(n,t,f),--i||a||l(null,c)},[n,function(n,r){return a?void 0:(i++,n=o(n),t(n)?void n(function(n,t){return a?void 0:null!=n?(a=!0,l(n)):(c[r]=arguments.length>2?u(arguments,1):t,--i||l(null,c))}):(c[r]=n,--i||l(null,c)))}]):l(new Error("Not array or object"))}}function a(n){return function(t){n.then(function(n){t(null,n)},t)}}function f(n,u,r){function l(){return a.result!==!1?(a.result=arguments.length?arguments:[null],a.callback?f(n,a):void 0):void 0}var c,i=u.result,a=u.next,s=n.onerror||l;return u.result=!1,n.debug&&!r&&n.debug.apply(null,i),null!=i[0]&&(i=[i[0]],n.onerror)?s(i[0]):(c=e(u.ctx,s,u.callback,i),"undefined"!=typeof c?null===c?l(null):(c=o(c),t(c)?void e(u.ctx,s,c,[l]):l(null,c)):void 0)}function s(r){function l(n){return c(function(t){return e(n,t)})}function e(n,t){var u={ctx:n.ctx||null,next:null,result:null,callback:null};if(n.result!==!1)return n.callback=t,n.next=u,n.result&&f(s,n),l(u)}function a(n){var u={ctx:this||null,next:null,result:null,callback:null};return n=o(n),t(n)?f(s,{ctx:u.ctx,next:u,result:[null],callback:function(){return n}},!0):u.result=null==n?[null]:[null,n],l(u)}var s={onerror:null,debug:null};return n(r)?s.onerror=r:r&&(n(r.debug)&&(s.debug=r.debug),n(r.onerror)&&(s.onerror=r.onerror)),a.all=function(n){return a.call(this===a?null:this,i(n))},a.digest=function(){var n=arguments;return a.call(this===a?null:this,function(t){t.apply(null,n)})},a.thunkify=function(n){var t=this===a?null:this;return function(){var r=u(arguments);return a.call(t||this,function(t){r.push(t),n.apply(this,r)})}},a.delay=function(n){return a.call(this===a?null:this,function(t){setTimeout(t,n)})},a}var h={},d=Object.prototype.toString,y=Array.isArray||function(n){return"[object Array]"===d.call(n)};return s.NAME="thunks",s.VERSION="v1.1.1",s});