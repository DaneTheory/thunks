/**
 * thunks: v0.7.0
 * https://github.com/teambition/thunks
 */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.thunks=b()}(this,function(){"use strict";function a(a){return"function"==typeof a}function b(a){return"[object Object]"===k.call(a)}function c(b){return a(b)&&b._isThunk===j}function d(a,b){var c=[],d=a.length;for(b=b||0;d-->b;)c[d-b]=a[d];return c}function e(b){return b?(a(b)?b=f(b):a(b.toThunk)?b=f(b.toThunk()):a(b.then)&&(b=f(h(b))),b):b}function f(a){return a._isThunk=j,a}function g(a){return function(f){function g(){if(m(a)){i=a.length;for(var c=i-1;c>=0;c--)h(a[c],c)}else{if(!b(a))throw new Error("Not array or object");i=1;for(var d in a)l.call(a,d)&&(i+=1,h(a[d],d));i-=1}i||j||f(null,k)}function h(a,b){return j?void 0:(a=e(a),c(a)?void a(function(a,c){return j?void 0:null!=a?(j=!0,f(a)):(k[b]=arguments.length>2?d(arguments,1):c,--i||f(null,k))}):(k[b]=a,--i||f(null,k)))}var i,j,k;try{k=new a.constructor,g()}catch(n){j=!0,f(n)}}}function h(a){return function(b){a.then(function(a){b(null,a)},b)}}function i(b){function h(a){function b(){return g.result!==!1?(g.result=arguments.length?arguments:[null],g.callback?h(g):void 0):void 0}var d,f=a.result,g=a.next,i=l.onerror||b;if(a.result=!1,l.debug&&!a.start&&l.debug.apply(null,f),null!=f[0]){if(l.onerror)return i(f[0]);f=[f[0]]}try{switch(f.length){case 1:d=a.callback.call(a.ctx,f[0]);break;case 2:d=a.callback.call(a.ctx,f[0],f[1]);break;case 3:d=a.callback.call(a.ctx,f[0],f[1],f[2]);break;default:d=a.callback.apply(a.ctx,f)}}catch(j){return i(j)}if(null==d)return b(null);if(d=e(d),!c(d))return b(null,d);try{return d.call(a.ctx,b)}catch(j){return i(j)}}function i(a){return f(function(b){return j(a,b)})}function j(a,b){var c={ctx:a.ctx};if(a.result!==!1)return a.callback=b,a.next=c,a.result&&h(a),i(c)}function k(a){var b={ctx:this||null};return a=e(a),c(a)?h({start:!0,ctx:b.ctx,next:b,result:[null],callback:function(){return a}}):b.result=null==a?[null]:[null,a],i(b)}var l={};return a(b)?l.onerror=b:b&&(l.debug=a(b.debug)?b.debug:null,l.onerror=a(b.onerror)?b.onerror:null),k.all=function(a){return k.call(this,g(a))},k.digest=function(){var a=arguments;return k.call(this,function(b){b.apply(null,a)})},k.thunkify=function(a){return function(){var b=d(arguments);return k.call(this,function(c){b.push(c),a.apply(this,b)})}},k}var j={},k=Object.prototype.toString,l=Object.prototype.hasOwnProperty,m=Array.isArray||function(a){return"[object Array]"===k.call(a)};return i.NAME="thunks",i.VERSION="0.7.0",i});