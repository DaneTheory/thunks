!function(n,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):n.thunks=t()}("object"==typeof window?window:this,function(){"use strict";function n(n){return"function"==typeof n}function t(t){return n(t)&&t._isThunk===i}function r(n,t){var r=n.length,l=Array(r);for(t=t||0;r-->t;)l[r-t]=n[r];return l}function l(t){return t?(n(t)?t=u(t):n(t.toThunk)?t=u(t.toThunk()):n(t.then)&&(t=u(c(t))),t):t}function u(n){return n._isThunk=i,n}function e(n){return function(u){function e(){if(h(n)){o=n.length,i=Array(o);for(var t=o-1;t>=0;t--)c(n[t],t)}else{if(!n||"object"!=typeof n)throw new Error("Not array or object");o=1,i={};for(var r in n)s.call(n,r)&&(o+=1,c(n[r],r));o-=1}o||a||u(null,i)}function c(n,e){return a?void 0:(n=l(n),t(n)?void n(function(n,t){return a?void 0:null!=n?(a=!0,u(n)):(i[e]=arguments.length>2?r(arguments,1):t,--o||u(null,i))}):(i[e]=n,--o||u(null,i)))}var o,a,i;try{e()}catch(f){a=!0,u(f)}}}function c(n){return function(t){n.then(function(n){t(null,n)},t)}}function o(n,r){function u(){return a.result!==!1?(a.result=arguments.length?arguments:[null],a.callback?o.call(i,a):void 0):void 0}var e,c=n.result,a=n.next,i=this,f=i.onerror||u;if(n.result=!1,i.debug&&!r&&i.debug.apply(i,c),null!=c[0]){if(i.onerror)return f.call(i,c[0]);c=[c[0]]}try{switch(c.length){case 1:e=n.callback.call(n.ctx,c[0]);break;case 2:e=n.callback.call(n.ctx,c[0],c[1]);break;case 3:e=n.callback.call(n.ctx,c[0],c[1],c[2]);break;default:e=n.callback.apply(n.ctx,c)}}catch(s){return f(s)}if(null==e)return u(null);if(e=l(e),!t(e))return u(null,e);try{return e.call(n.ctx,u)}catch(s){return f(s)}}function a(c){function a(n){return u(function(t){return i(n,t)})}function i(n,t){var r={ctx:n.ctx||null,next:null,result:null,callback:null};if(n.result!==!1)return n.callback=t,n.next=r,n.result&&o.call(s,n),a(r)}function f(n){var r={ctx:this||null,next:null,result:null,callback:null};return n=l(n),t(n)?o.call(s,{ctx:r.ctx,next:r,result:[null],callback:function(){return n}},!0):r.result=null==n?[null]:[null,n],a(r)}var s={onerror:null,debug:null};return n(c)?s.onerror=c:c&&(n(c.debug)&&(s.debug=c.debug),n(c.onerror)&&(s.onerror=c.onerror)),f.all=function(n){return f.call(this===f?null:this,e(n))},f.digest=function(){var n=arguments;return f.call(this===f?null:this,function(t){t.apply(null,n)})},f.thunkify=function(n){var t=this===f?null:this;return function(){var l=r(arguments);return f.call(t||this,function(t){l.push(t),n.apply(this,l)})}},f}var i={},f=Object.prototype.toString,s=Object.prototype.hasOwnProperty,h=Array.isArray||function(n){return"[object Array]"===f.call(n)};return a.NAME="thunks",a.VERSION="v0.9.0",a});