!function(n,r){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=r():"function"==typeof define&&define.amd?define([],r):n.thunks=r()}("object"==typeof window?window:this,function(){"use strict";function n(n){return"function"==typeof n}function r(r){return n(r)&&r._isThunk===s}function t(n,r){var t=n.length,u=Array(t);for(r=r||0;t-->r;)u[t-r]=n[t];return u}function u(n,r,t){if(t)for(var u=0,e=n.length;e>u;u++)r(n[u],u,n);else for(var l in n)n.hasOwnProperty(l)&&r(n[l],l,n)}function e(n,r,t){var u={error:null,value:null};try{u.value=r.apply(n,t)}catch(e){u.error=e}return u}function l(r){return r?(n(r)?r=o(r):n(r.toThunk)?r=o(r.toThunk()):n(r.then)&&(r=o(i(r))),r):r}function o(n){return n._isThunk=s,n}function c(n){return function(o){var c,i=1,a=!1,f=v(n);if(f?c=Array(n.length):n&&"object"==typeof n&&(c={}),!c)return o(new Error("Not array or object"));var s=e(null,function(n,r){u(n,r,f),--i||a||o(null,c)},[n,function(n,u){return a?void 0:(i++,n=l(n),r(n)?(n(function(n,r){return a?void 0:null!=n?(a=!0,o(n)):(c[u]=arguments.length>2?t(arguments,1):r,--i||o(null,c))}),void 0):(c[u]=n,--i||o(null,c)))}]);s.error&&(a=!0,o(s.error))}}function i(n){return function(r){n.then(function(n){r(null,n)},r)}}function a(n,t,u){function o(){return f.result!==!1?(f.result=arguments.length?arguments:[null],f.callback?a(n,f):void 0):void 0}var c,i=t.result,f=t.next,s=n.onerror||o;if(t.result=!1,n.debug&&!u&&n.debug.apply(null,i),null!=i[0]&&(i=[i[0]],n.onerror))return s(i[0]);var h=e(t.ctx,t.callback,i);return h.error?s(h.error):null==h.value?o(null):(c=l(h.value),r(c)?(h=e(t.ctx,c,[o]),h.error?s(h.error):null):o(null,c))}function f(u){function e(n){return o(function(r){return i(n,r)})}function i(n,r){var t={ctx:n.ctx,next:null,result:null,callback:null};if(n.result!==!1)return n.callback=r,n.next=t,n.result&&a(s,n),e(t)}function f(n){var t={ctx:this===f?null:this,next:null,result:null,callback:null};return n=l(n),r(n)?a(s,{ctx:t.ctx,next:t,result:[null],callback:function(){return n}},!0):t.result=null==n?[null]:[null,n],e(t)}var s={onerror:null,debug:null};return n(u)?s.onerror=u:u&&(n(u.debug)&&(s.debug=u.debug),n(u.onerror)&&(s.onerror=u.onerror)),f.all=function(n){return f.call(this,c(n))},f.digest=function(){var n=arguments;return f.call(this,function(r){r.apply(null,n)})},f.thunkify=function(n){var r=this===f?null:this;return function(){var u=t(arguments);return f.call(r||this,function(r){u.push(r),n.apply(this,u)})}},f.delay=function(n){return f.call(this,function(r){setTimeout(r,n)})},f}var s={},h=Object.prototype.toString,v=Array.isArray||function(n){return"[object Array]"===h.call(n)};return f.NAME="thunks",f.VERSION="v1.2.1",f});