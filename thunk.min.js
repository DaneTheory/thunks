/**
 * thunk: v0.4.0
 * https://github.com/teambition/thunk
 */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.thunk=a.Thunk=b()}(this,function(){"use strict";function a(a){return"function"==typeof a}function b(a){return a&&Object===a.constructor}function c(b){return a(b)&&b._isThunk}function d(a,b){var c=[],d=a.length;for(b=b||0;d-->b;)c[d-b]=a[d];return c}var e=Object.prototype.toString,f=Array.isArray||function(a){return"[object Array]"===e.call(a)};return function(e){function g(a){var b={};return a=i(a),c(a)?h({next:b,result:[null],callback:function(){return a}}):b.result=null==a?[null]:[null,a],k(b)}function h(a){function b(){f.result!==!1&&(f.result=arguments,f.callback&&h(f))}var d,e=a.result,f=a.next,g=n.onerror||b;if(a.result=!1,n.debug&&n.debug.apply(null,e),null!=e[0]){if(n.onerror)return g(e[0]);e=[e[0]]}try{switch(e.length){case 1:d=a.callback(e[0]);break;case 2:d=a.callback(e[0],e[1]);break;case 3:d=a.callback(e[0],e[1],e[2]);break;default:d=a.callback.apply(null,e)}}catch(j){return g(j)}if(null==d)return b(null);if(d=i(d),!c(d))return b(null,d);try{d(b)}catch(j){return g(j)}}function i(b){return b?(a(b)?b=j(b):a(b.thunk)?b=j(b.thunk):a(b.then)&&(b=j(m(b))),b):b}function j(a){return a._isThunk=!0,a}function k(a){return j(function(b){var c={};if(a.result!==!1)return a.callback=b,a.next=c,a.result&&h(a),k(c)})}function l(a){return function(e){function g(){if(f(a)){j=a.length;for(var c=j-1;c>=0;c--)h(a[c],c)}else{if(!b(a))throw new Error("Not array or object");j=1;for(var d in a)j+=1,h(a[d],d);j-=1}j||k||e(null,l)}function h(a,b){return k?void 0:(a=i(a),c(a)?void a(function(a,c){return k?void 0:null!=a?(k=!0,e(a)):(l[b]=arguments.length>2?d(arguments,1):c,--j||e(null,l))}):(l[b]=a,--j||e(null,l)))}var j,k,l=new a.constructor;try{g()}catch(m){k=!0,e(m)}}}function m(a){return function(b){a.then(function(a){b(null,a)},b)}}var n={};return a(e)?n.onerror=e:e&&(n.debug=a(e.debug)?e.debug:null,n.onerror=a(e.onerror)?e.onerror:null),g.all=function(a){return g(l(a))},g}});